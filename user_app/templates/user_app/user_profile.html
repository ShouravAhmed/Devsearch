<!DOCTYPE html>
{% extends 'main.html' %}

<!-- load static -->
{% load static %}

<!-- all body data -->
{% block bodyblock %}

<!-- Main Section -->
<main class="profile my-md">
	<div class="container">
		<div class="layout">
			<div class="column column--1of3">
				<div class="card text-center">
					<div class="card__body dev">
						{% if request.user.id == profile.user.id %}
						<a class="tag tag--pill tag--main settings__btn" href="{% url 'update_profile' profile.id %}"><i class="im im-edit"></i> Edit</a>
						{% endif %}
						<img class="avatar avatar--xl" src="{{ profile.profile_picture.url }}" />
						<h2 class="dev__name">{{ profile.name }}</h2>
						<h5 class="dev__title">@{{ profile.username }}</h5>
						<br />
						<p class="dev__title">{{ profile.short_intro }}</p>
						<p class="dev__location">Based in {{profile.location}}</p>
						<ul class="dev__social">
							{% if profile.social_github %}
							<li>
								<a title="Github" href="{{ profile.social_github }}" target="_blank"><i class="im im-github"></i></a>
							</li>
							{% endif %} {% if profile.social_stackoverflow %}
							<li>
								<a title="Stackoverflow" href="{{profile.social_stackoverflow}}" target="_blank"><i class="im im-stackoverflow"></i></a>
							</li>
							{% endif %} {% if profile.social_facebook %}
							<li>
								<a title="Twitter" href="{{profile.social_facebook}}" target="_blank"><i class="im im-facebook"></i></a>
							</li>
							{% endif %} {% if profile.social_twitter %}
							<li>
								<a title="Twitter" href="{{profile.social_twitter}}" target="_blank"><i class="im im-twitter"></i></a>
							</li>
							{% endif %} {% if profile.social_linkedin %}
							<li>
								<a title="LinkedIn" href="{{profile.social_linkedin}}" target="_blank"><i class="im im-linkedin"></i></a>
							</li>
							{% endif %} {% if profile.social_codeforces %}
							<li>
								<a title="Personal Website" href="{{ profile.social_codeforces }}}" target="_blank"><i class="im im-globe"></i></a>
							</li>
							{% endif %}
						</ul>
						{% if request.user.is_authenticated and request.user.id != profile.user.id %}
						<a href="{% url 'chatapp' profile.id %}" class="btn btn--sub btn--lg">Send Message </a>
						{% endif %}
					</div>
				</div>
			</div>
			<div class="column column--2of3">
				<div class="devInfo">
					<h3 class="devInfo__title">About Me</h3>
					<p class="devInfo__about">{{ profile.bio }}</p>
				</div>
				<div class="devInfo">
					{% if request.user.id == profile.user.id %}
					<div class="settings">
						<h3 class="settings__title">Skills</h3>
						<a class="tag tag--pill tag--sub settings__btn tag--lg" href="{% url 'create_skill' %}"><i class="im im-plus"></i> Add Skill</a>
					</div>
					{% else %}
					<h3 class="devInfo__title">Skills</h3>
					{% endif %}

					<!-- skills list -->
					{% if request.user.id == profile.user.id %}
					<table class="settings__table">
						{% for skill in allskills %}
						<tr>
							<td class="settings__tableInfo">
								<h4>{{ skill.name }}</h4>
								{% if skill.description %}
								<p>{{ skill.description|slice:"200" }}...</p>
								{% endif %}
							</td>
							<td class="settings__tableActions">
								<a class="tag tag--pill tag--main settings__btn" href="{% url 'update_skill' skill.id %}"><i class="im im-edit"></i> Edit</a>
								<a class="tag tag--pill tag--main settings__btn" href="{% url 'delete_skill' skill.id %}"><i class="im im-x-mark-circle-o"></i> Delete</a>
							</td>
						</tr>
						{% endfor %}
					</table>
					{% else %}
					<div class="devInfo__skills">
						{% for skill in dskills %}
						<div class="devSkill">
							<h4 class="devSkill__title">{{ skill.name }}</h4>
							<p class="devSkill__info">{{ skill.description }}</p>
						</div>
						{% endfor %} {% if skills %}
						<h3 class="devInfo__subtitle">Other Skills</h3>
						<div class="devInfo__otherSkills">
							{% for skill in skills %}
							<span class="tag tag--pill tag--sub tag--lg">
								<small>{{ skill.name }}</small>
							</span>
							{% endfor %}
						</div>
						{% endif %}
					</div>
					{% endif %}
				</div>

				<div class="devInfo">
					{% if request.user.id == profile.user.id %}
					<div class="settings">
						<h3 class="settings__title">Projects</h3>
						<a class="tag tag--pill tag--sub settings__btn tag--lg" href="{% url 'create_project' %}"><i class="im im-plus"></i> Add Project</a>
					</div>
					{% else %}
					<h3 class="devInfo__title">Projects</h3>
					{% endif %}

					<!-- edit projects -->
					{% if request.user.id == profile.user.id %}
					<table class="settings__table">
						{% for project in projects %}
						<tr>
							<td class="settings__thumbnail">
								<a href="{% url 'project' project.id %}"><img src="{{ project.featured_image.url }}" alt="Project Thumbnail" /></a>
							</td>
							<td class="settings__tableInfo">
								<a href="{% url 'project' project.id %}">{{ project.title }}</a>
								<p>{{ project.description|slice:"200" }}...</p>
							</td>
							<td class="settings__tableActions">
								<a class="tag tag--pill tag--main settings__btn" href="{% url 'update_project' project.id %}"><i class="im im-edit"></i> Edit</a>
								<a class="tag tag--pill tag--main settings__btn" href="{% url 'delete_project' project.id %}"><i class="im im-x-mark-circle-o"></i> Delete</a>
							</td>
						</tr>
						{% endfor %}
					</table>
					{% else %}
					<div class="grid grid--two">
						{% for project in projects %}
						<div class="column">
							<div class="card project">
								<a href="{% url 'project' project.id %}" class="project">
									<img class="project__thumbnail" src="{{ project.featured_image.url }}" alt="project thumbnail" />
									<div class="card__body">
										<h3 class="project__title">{{ project.title }}</h3>
										<p>
											<a class="project__author" href="{% url 'user_profile' project.owner.id %}">By {{project.owner.username}}</a>
										</p>
										<p class="project--rating">
											<span style="font-weight: bold">{{ project.vote_ratio }}%</span>
											Postitive Feedback ({{project.vote_total}} Vote{{project.vote_total|pluralize:"s"}})
										</p>
										<div class="project__tags">
											{% for tag in project.tags.all %}
											<span class="tag tag--pill tag--main">
												<small>{{ tag }}</small>
											</span>
											{% endfor %}
											<span class="tag tag--pill tag--main">
												<small>â‹¯</small>
											</span>
										</div>
									</div>
								</a>
							</div>
						</div>
						{% endfor %}
					</div>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
</main>

{% endblock %}
